<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mapa — oceany / morza / zatoki</title>
<style>
  :root{
    --panel-width: 20vw;
    --map-width: calc(100vw - var(--panel-width));
    --bg-ocean: #e5f2ff;
    --land: #d0d0d0;
    --panel-bg: #fafafa;
    --accent: #1f7ed0;
    --label-color: #07203a;
  }
  html,body{
    height:100%;
    margin:0;
    font-family: Inter, Roboto, Arial, sans-serif;
    color: #111;
    background: #fff;
  }
  .app {
    display:flex;
    height:100vh;
    width:100vw;
    overflow:hidden;
  }

  /* MAP CONTAINER */
  .map-wrap{
    width: var(--map-width);
    height: 100%;
    display: flex;
    align-items: stretch;
    justify-content:center;
    background: linear-gradient(to bottom, var(--bg-ocean), #dff0ff 60%);
    position: relative;
  }

  /* SVG scales to available area while preserving aspect ratio */
  svg.world {
    width: 98%;
    height: 98%;
    max-width: 2000px;
    max-height: 1000px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    border-radius: 6px;
    background: transparent;
  }

  /* simple graticule styling */
  .graticule { stroke: rgba(0,0,0,0.06); stroke-width: 0.6; fill: none; }

  /* land placeholder (very simplified) */
  .land { fill: var(--land); stroke: rgba(0,0,0,0.06); stroke-width: 0.3; }

  /* feature points */
  .feature { cursor: pointer; transition: transform .12s ease, r .12s ease; }
  .feature:hover { transform: translateY(-4px); }

  /* labels next to points */
  .label {
    font-size: 12px;
    font-weight: 600;
    fill: var(--label-color);
    pointer-events: none;
    text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  }

  /* PANEL */
  .panel{
    width: var(--panel-width);
    height:100%;
    background: var(--panel-bg);
    border-left: 1px solid rgba(0,0,0,0.06);
    padding: 18px;
    box-sizing: border-box;
    display:flex;
    flex-direction: column;
    gap: 12px;
    box-shadow: -6px 0 24px rgba(0,0,0,0.02);
  }
  .panel h2 { margin:0; font-size:18px; color:var(--accent); }
  .panel .hint { font-size:13px; color:#444; margin-top:6px; }
  .controls { margin-top:8px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .btn {
    border: none;
    background: var(--accent);
    color: white;
    padding:8px 12px;
    border-radius:6px;
    cursor:pointer;
    font-weight:600;
    font-size:13px;
  }
  .btn.secondary {
    background: transparent;
    color: var(--accent);
    border: 1px solid rgba(31,126,208,0.14);
  }
  .list {
    margin-top:8px;
    overflow:auto;
    padding-right:6px;
    border-top: 1px dashed rgba(0,0,0,0.04);
    padding-top:10px;
  }
  .list-item {
    font-size:13px;
    padding:6px 0;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
  }
  .small { font-size:12px; color:#666; }

  /* tooltip */
  .tooltip {
    position: absolute;
    pointer-events: none;
    background: rgba(8,20,36,0.95);
    color: white;
    padding:6px 8px;
    border-radius:6px;
    font-size:13px;
    transform: translate(-50%, -130%);
    white-space: nowrap;
    z-index: 40;
    display:none;
  }

  /* responsive tweaks */
  @media (max-width:800px){
    :root { --panel-width: 28vw; }
    .panel h2 { font-size:16px; }
    .label { font-size:11px; }
  }
  @media (max-width:520px){
    .app{ flex-direction: column; }
    :root { --panel-width: 100%; --map-width: 100%; }
    .panel { order:2; height: 26vh; overflow:auto; border-left: none; border-top: 1px solid rgba(0,0,0,0.05); }
    .map-wrap { order:1; height: 74vh; width:100%; }
  }
</style>
</head>
<body>
<div class="app">
  <div class="map-wrap" id="mapWrap">
    <!-- Tooltip -->
    <div class="tooltip" id="tooltip"></div>

    <!-- SVG world map (simplified) -->
    <!-- We do not use external assets. The land path here is a very simplified placeholder
         to provide visual context — points are positioned by projection math. -->
    <svg class="world" viewBox="0 0 2000 1000" preserveAspectRatio="xMidYMid meet" id="svgMap" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.06"/>
        </filter>
      </defs>

      <!-- ocean background (fills SVG) -->
      <rect x="0" y="0" width="2000" height="1000" fill="#e5f2ff"></rect>

      <!-- very simplified 'land' shapes (purely decorative; not geographically exact) -->
      <!-- These are coarse blobs to give land/ocean contrast. They are intentionally simplified. -->
      <path class="land" d="M120 420 C160 270, 260 220, 420 200 C620 190, 720 240, 880 220 C1040 200,1150 140,1300 160 C1500 190,1580 320,1700 360 C1820 400,1880 520,1900 620 L1900 820 L1800 880 L1600 880 L1400 820 C1300 780,1200 740,1050 760 C900 780,760 820,600 820 C470 820,360 760,240 760 C160 760,80 700,80 620 C80 540,100 480,120 420 Z"></path>

      <path class="land" d="M200 860 C300 840,420 800,540 800 C700 800,820 840,980 860 C1100 880,1260 920,1400 920 C1520 920,1640 900,1740 900 C1680 760,1560 630,1420 600 C1240 560,1100 540,920 520 C740 500,560 540,420 560 C290 580,200 700,200 860 Z"></path>

      <!-- graticule: meridians and parallels -->
      <!-- draw every 30 degrees as light lines -->
      <!-- longitudes -->
      <g id="graticule">
        <!-- vertical lines for longitudes -->
        <!-- lon: -180..180 mapped to x: 0..2000 -->
        <!-- generate a few lines manually -->
        <line class="graticule" x1="0" y1="0" x2="0" y2="1000" />
        <line class="graticule" x1="250" y1="0" x2="250" y2="1000" />
        <line class="graticule" x1="500" y1="0" x2="500" y2="1000" />
        <line class="graticule" x1="750" y1="0" x2="750" y2="1000" />
        <line class="graticule" x1="1000" y1="0" x2="1000" y2="1000" />
        <line class="graticule" x1="1250" y1="0" x2="1250" y2="1000" />
        <line class="graticule" x1="1500" y1="0" x2="1500" y2="1000" />
        <line class="graticule" x1="1750" y1="0" x2="1750" y2="1000" />
        <line class="graticule" x1="2000" y1="0" x2="2000" y2="1000" />

        <!-- horizontal lines for latitudes -->
        <line class="graticule" x1="0" y1="125" x2="2000" y2="125" />
        <line class="graticule" x1="0" y1="250" x2="2000" y2="250" />
        <line class="graticule" x1="0" y1="375" x2="2000" y2="375" />
        <line class="graticule" x1="0" y1="500" x2="2000" y2="500" />
        <line class="graticule" x1="0" y1="625" x2="2000" y2="625" />
        <line class="graticule" x1="0" y1="750" x2="2000" y2="750" />
        <line class="graticule" x1="0" y1="875" x2="2000" y2="875" />
      </g>

      <!-- container for dynamic points (will be filled by JS) -->
      <g id="pointsLayer"></g>
      <g id="labelsLayer"></g>

    </svg>
  </div>

  <aside class="panel" id="panel">
    <h2>Ustawienia</h2>
    <div class="hint">Mapa: equirectangular. Punkty odpowiadają wyszczególnionym akwenom.</div>

    <div class="controls">
      <button class="btn" id="toggleLabels">Pokaż etykiety</button>
      <button class="btn secondary" id="zoomToAll">Dopasuj widok</button>
    </div>

    <div class="list" id="list">
      <!-- lista akwenów (wypełniona JS) -->
    </div>

    <div style="flex:1"></div>
    <div class="small">Plik wygenerowany lokalnie — edytuj tablicę <code>features</code> w skrypcie, by zmienić punkty.</div>
  </aside>
</div>

<script>
/*
  Map projection and rendering script.
  - Equirectangular projection:
      x = (lon + 180) / 360 * width
      y = (90 - lat) / 180 * height
  - SVG base size: width=2000, height=1000 (viewBox)
  - 'features' array prefilled with akweny (oceany, morza, zatoki) podane przez użytkownika.
  - Labels toggle: shows/hides textual labels next to points.
*/

/* ============================
   FEATURES (TU MOŻESZ EDYTOWAĆ)
   ============================

   Wstawione są elementy, które podałeś:
   - Oceany: Indyjski, Spokojny, Arktyczny
   - Morza: Arabskie, Karskie, Łaptiewów (Laptev), Wschodniosyberyjskie (East Siberian),
           Czukockie (Chukchi), Beringa (Bering), Ochodzkie (Okhotsk),
           Japońskie (Sea of Japan), Żółte (Yellow Sea), Wschodniochińskie (East China Sea)
   - Zatoki: Bengalska (Bay of Bengal), Perska (Persian Gulf)

   Współrzędne są przybliżone, dobrane aby punkty pojawiały się w oczekiwanych rejonach.
*/
const features = [
  // OCEANS
  { name: "Ocean Indyjski", lat: -20.0, lon: 80.0, type: "ocean" },
  { name: "Ocean Spokojny", lat: 0.0, lon: -160.0, type: "ocean" },
  { name: "Ocean Arktyczny", lat: 80.0, lon: 0.0, type: "ocean" },

  // SEAS
  { name: "Morze Arabskie", lat: 15.0, lon: 65.0, type: "sea" },
  { name: "Morze Karskie", lat: 72.0, lon: 75.0, type: "sea" },
  { name: "Morze Łaptiewów", lat: 75.0, lon: 110.0, type: "sea" },
  { name: "Morze Wschodniosyberyjskie", lat: 75.0, lon: 155.0, type: "sea" },
  { name: "Morze Czukockie", lat: 70.0, lon: -170.0, type: "sea" }, // -170 ~ 190E
  { name: "Morze Beringa", lat: 56.0, lon: -170.0, type: "sea" },
  { name: "Morze Ochockie", lat: 54.0, lon: 143.0, type: "sea" },
  { name: "Morze Japońskie", lat: 38.0, lon: 138.0, type: "sea" },
  { name: "Morze Żółte", lat: 35.0, lon: 122.0, type: "sea" },
  { name: "Morze Wschodniochińskie", lat: 28.0, lon: 123.0, type: "sea" },

  // BAYS
  { name: "Zatoka Bengalska", lat: 12.0, lon: 90.0, type: "bay" },
  { name: "Zatoka Perska", lat: 25.0, lon: 52.0, type: "bay" }
];

/* ============================
   Projection function
   ============================ */
function project(lat, lon, width, height) {
  // Equirectangular projection
  const x = (lon + 180) / 360 * width;
  const y = (90 - lat) / 180 * height;
  return { x, y };
}

/* ============================
   Rendering & interactivity
   ============================ */
const svg = document.getElementById('svgMap');
const pointsLayer = document.getElementById('pointsLayer');
const labelsLayer = document.getElementById('labelsLayer');
const listEl = document.getElementById('list');
const tooltip = document.getElementById('tooltip');

let labelsVisible = false;

/* colors per type */
const typeStyles = {
  ocean: { fill: "#2b7fb5", r: 10 },
  sea:   { fill: "#1f9bd6", r: 8 },
  bay:   { fill: "#0f6f9a", r: 7 }
};

/* clear and re-render points based on features array */
function renderPoints() {
  // clear
  pointsLayer.innerHTML = '';
  labelsLayer.innerHTML = '';
  listEl.innerHTML = '';

  const vb = svg.viewBox.baseVal;
  const width = vb.width || svg.clientWidth;
  const height = vb.height || svg.clientHeight;

  features.forEach((f, idx) => {
    const p = project(f.lat, f.lon, width, height);
    const style = typeStyles[f.type] || { fill: "#ff4d4f", r: 8 };

    // create circle
    const circ = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    circ.setAttribute("cx", p.x.toFixed(2));
    circ.setAttribute("cy", p.y.toFixed(2));
    circ.setAttribute("r", style.r);
    circ.setAttribute("fill", style.fill);
    circ.setAttribute("class", "feature");
    circ.setAttribute("data-name", f.name);
    circ.setAttribute("data-idx", idx);
    circ.setAttribute("opacity", "0.95");
    pointsLayer.appendChild(circ);

    // label (initially hidden)
    const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
    label.setAttribute("x", (p.x + style.r + 8).toFixed(2));
    label.setAttribute("y", (p.y + 4).toFixed(2));
    label.setAttribute("class", "label");
    label.textContent = f.name;
    label.style.display = labelsVisible ? "block" : "none";
    labelsLayer.appendChild(label);

    // list entry in panel
    const item = document.createElement('div');
    item.className = 'list-item';
    item.innerHTML = `<div>${f.name}</div><div class="small">${f.lat}°, ${f.lon}°</div>`;
    listEl.appendChild(item);

    // tooltip + hover behavior
    circ.addEventListener('mouseenter', (ev) => {
      showTooltip(f.name, ev);
    });
    circ.addEventListener('mouseleave', hideTooltip);

    // click: briefly pulse and center/flash label
    circ.addEventListener('click', (ev) => {
      pulseCircle(circ);
      // temporarily show label if hidden
      if (!labelsVisible) {
        label.style.display = 'block';
        setTimeout(()=> {
          if(!labelsVisible) label.style.display = 'none';
        }, 2000);
      }
    });
  });
}

/* pulse animation (simple SVG scale via r change) */
function pulseCircle(circleEl) {
  const r0 = Number(circleEl.getAttribute('r') || 8);
  let grow = r0 + 6;
  circleEl.setAttribute('r', grow);
  setTimeout(()=> circleEl.setAttribute('r', r0), 220);
}

/* tooltip placement */
function showTooltip(text, ev) {
  tooltip.textContent = text;
  tooltip.style.display = 'block';
  positionTooltip(ev);
}
function hideTooltip() {
  tooltip.style.display = 'none';
}
function positionTooltip(ev) {
  // ev may be a MouseEvent over SVG; we want to place tooltip relative to page
  const x = ev.clientX;
  const y = ev.clientY;
  tooltip.style.left = x + 'px';
  tooltip.style.top = y + 'px';
}

/* toggle labels */
document.getElementById('toggleLabels').addEventListener('click', () => {
  labelsVisible = !labelsVisible;
  const btn = document.getElementById('toggleLabels');
  btn.textContent = labelsVisible ? 'Ukryj etykiety' : 'Pokaż etykiety';
  // toggle display for all labels
  const texts = labelsLayer.querySelectorAll('text');
  texts.forEach(t => t.style.display = labelsVisible ? 'block' : 'none');
});

/* zoomToAll: here it simply ensures SVG uses full viewBox (no external zoom libs) */
document.getElementById('zoomToAll').addEventListener('click', ()=> {
  // As placeholder: we just rerender (useful after manual edits)
  renderPoints();
});

/* handle mousemove over SVG to position tooltip nicely */
svg.addEventListener('mousemove', (ev) => {
  if (tooltip.style.display === 'block') {
    positionTooltip(ev);
  }
});

/* handle window resize -> re-render points (to adjust to scaling) */
window.addEventListener('resize', () => {
  renderPoints();
});

/* initial render */
renderPoints();

/* ============================
   NOTES:
   - To change list of akwenów, edytuj tablicę 'features' powyżej.
   - Każdy wpis to: { name: "Nazwa", lat: 52.0, lon: 19.0, type: "sea|ocean|bay" }
   - Tablica może być pusta — skrypt obsłuży brak punktów.
   - Jeśli chcesz inne style (kolory/rozmiary), edytuj 'typeStyles' w skrypcie.
   ============================ */
</script>
</body>
</html>
